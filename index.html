<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>home-资源站</title>
    <link rel="stylesheet" href="style/final-res-style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  
</head>
<body>
    <div class="container">
        <h1>
            <i class="bi bi-folder2"></i>home
        </h1>
        <p id="hitokoto">
            <a href="#" id="hitokoto_text">:D 获取中...</a>
        </p>
        
        <div>
            <i class="bi bi-arrow-up"></i><a href="">上级目录</a>
        </div>
        
        <div class="file-list" id="fileList">
            <!-- 文件列表将通过JavaScript动态生成 -->
            <div class="loading">
                <i class="bi bi-arrow-repeat"></i> 正在加载文件夹信息...
            </div>
        </div>
    </div>

    <script>
        // 加载动画
        document.addEventListener('DOMContentLoaded', function() {
            const fileList = document.getElementById('fileList');
            
            // 先显示加载状态
            fileList.innerHTML = `
                <div class="loading">
                    <i class="bi bi-arrow-repeat"></i> 正在加载文件夹信息...
                </div>
            `;
            
            // 动态加载folders.js
            const script = document.createElement('script');
            script.src = 'script/folders.js?v=' + Date.now(); // 添加时间戳防止缓存
            script.onload = function() {
                renderFolders();
            };
            script.onerror = function() {
                fileList.innerHTML = `
                    <div class="error">
                        <i class="bi bi-exclamation-triangle"></i> 无法加载文件夹信息
                    </div>
                `;
                // 回退到静态列表
                const fallbackFolders = [
                    { name: 'music', path: 'music/music.html', size: '加载中...' },
                    { name: 'style', path: 'style/style.html', size: '加载中...' },
                    { name: 'js', path: 'js/js.html', size: '加载中...' },
                    { name: 'mirror', path: 'mirror/mirror.html', size: '加载中...' },
                    { name: 'photo', path: 'photo/photo.html', size: '加载中...' },
                    { name: 'audio', path: 'audio/audio.html', size: '加载中...' }
                ];
                renderFolders(fallbackFolders);
            };
            document.head.appendChild(script);
            
            // 渲染文件夹列表
            function renderFolders(customFolders) {
                const foldersToRender = customFolders || window.folders || [];
                fileList.innerHTML = '';
                
                if (foldersToRender.length === 0) {
                    fileList.innerHTML = `
                        <div class="empty">
                            <i class="bi bi-folder-x"></i> 没有可显示的文件夹
                        </div>
                    `;
                    return;
                }
                
                foldersToRender.forEach(folder => {
                    const folderElement = document.createElement('div');
                    folderElement.className = 'file-item';
                    
                    const icon = document.createElement('i');
                    icon.className = 'bi bi-folder';
                    
                    const link = document.createElement('a');
                    link.href = folder.path;
                    link.textContent = folder.name;
                    
                    const sizeSpan = document.createElement('span');
                    sizeSpan.className = 'file-size';
                    sizeSpan.textContent = folder.size || '计算中...';
                    
                    folderElement.appendChild(icon);
                    folderElement.appendChild(link);
                    folderElement.appendChild(sizeSpan);
                    
                    fileList.appendChild(folderElement);
                });
            }
        });
    </script>
    <script src="js/final-res.min.js"></script>
</body>
</html>